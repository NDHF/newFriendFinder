<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Friend Finder</title>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>

</head>

<body>
    <h1>Friend Finder</h1>
    <h2>Please mark how closely you agree with each of the following statements:</h2>
    <h3>1 = Strongly Disagree // 5 = Strongly Agree</h3>
    <img width="300">
    <div id="inputFields">
        Name:
        <input type="text" id="nameInput">
        <br> Link to a Photo:
        <input type="text" id="photoLink">
        <br>
        <table>
            <tr>
                <th>Question</th>
                <th>Your Response</th>
            </tr>
            <tr>
                <td>
                    I like Huey Lewis and the News.
                </td>
                <td>
                    <select class="inputSelect" id="question1" autofocus>
                        <option id="question1Answer1" class="question1Answers" value="1">1</option>
                        <option id="question1Answer2" class="question1Answers" value="2">2</option>
                        <option id="question1Answer3" class="question1Answers" value="3">3</option>
                        <option id="question1Answer4" class="question1Answers" value="4">4</option>
                        <option id="question1Answer5" class="question1Answers" value="5">5</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    I believe the universe is governed by rules that are knowable to human inquiry.
                </td>
                <td>
                    <select class="inputSelect" id="question2">
                        <option id="question2Answer1" class="question2Answers" value="1">1</option>
                        <option id="question2Answer2" class="question2Answers" value="2">2</option>
                        <option id="question2Answer3" class="question2Answers" value="3">3</option>
                        <option id="question2Answer4" class="question2Answers" value="4">4</option>
                        <option id="question2Answer5" class="question2Answers" value="5">5</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    I believe that what's true for you might not be true for me.
                </td>
                <td>
                    <select class="inputSelect" id="question3">
                        <option id="question3Answer1" class="question3Answers" value="1">1</option>
                        <option id="question3Answer2" class="question3Answers" value="2">2</option>
                        <option id="question3Answer3" class="question3Answers" value="3">3</option>
                        <option id="question3Answer4" class="question3Answers" value="4">4</option>
                        <option id="question3Answer5" class="question3Answers" value="5">5</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    I like all music except rap and country.
                </td>
                <td>
                    <select class="inputSelect" id="question4">
                        <option id="question4Answer1" class="question4Answers" value="1">1</option>
                        <option id="question4Answer2" class="question4Answers" value="2">2</option>
                        <option id="question4Answer3" class="question4Answers" value="3">3</option>
                        <option id="question4Answer4" class="question4Answers" value="4">4</option>
                        <option id="question4Answer5" class="question4Answers" value="5">5</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    I enjoy travel.
                </td>
                <td>
                    <select class="inputSelect" id="question5">
                        <option id="question5Answer1" class="question5Answers" value="1">1</option>
                        <option id="question5Answer2" class="question5Answers" value="2">2</option>
                        <option id="question5Answer3" class="question5Answers" value="3">3</option>
                        <option id="question5Answer4" class="question5Answers" value="4">4</option>
                        <option id="question5Answer5" class="question5Answers" value="5">5</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    I enjoy reading.
                </td>
                <td>
                    <select class="inputSelect" id="question6">
                        <option id="question6Answer1" class="question6Answers" value="1">1</option>
                        <option id="question6Answer2" class="question6Answers" value="2">2</option>
                        <option id="question6Answer3" class="question6Answers" value="3">3</option>
                        <option id="question6Answer4" class="question6Answers" value="4">4</option>
                        <option id="question6Answer5" class="question6Answers" value="5">5</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    I enjoy learning new things.
                </td>
                <td>
                    <select class="inputSelect" id="question7">
                        <option id="question7Answer1" class="question7Answers" value="1">1</option>
                        <option id="question7Answer2" class="question7Answers" value="2">2</option>
                        <option id="question7Answer3" class="question7Answers" value="3">3</option>
                        <option id="question7Answer4" class="question7Answers" value="4">4</option>
                        <option id="question7Answer5" class="question7Answers" value="5">5</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    I play a musical instrument.
                </td>
                <td>
                    <select class="inputSelect" id="question8">
                        <option id="question8Answer1" class="question8Answers" value="1">1</option>
                        <option id="question8Answer2" class="question8Answers" value="2">2</option>
                        <option id="question8Answer3" class="question8Answers" value="3">3</option>
                        <option id="question8Answer4" class="question8Answers" value="4">4</option>
                        <option id="question8Answer5" class="question8Answers" value="5">5</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    I enjoy hiking.
                </td>
                <td>
                    <select class="inputSelect" id="question9">
                        <option id="question9Answer1" class="question9Answers" value="1">1</option>
                        <option id="question9Answer2" class="question9Answers" value="2">2</option>
                        <option id="question9Answer3" class="question9Answers" value="3">3</option>
                        <option id="question9Answer4" class="question9Answers" value="4">4</option>
                        <option id="question9Answer5" class="question9Answers" value="5">5</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    Human morality comes from outside the material universe.
                </td>
                <td>
                    <select class="inputSelect" id="question10">
                        <option id="question10Answer1" class="question10Answers" value="1">1</option>
                        <option id="question10Answer2" class="question10Answers" value="2">2</option>
                        <option id="question10Answer3" class="question10Answers" value="3">3</option>
                        <option id="question10Answer4" class="question10Answers" value="4">4</option>
                        <option id="question10Answer5" class="question10Answers" value="5">5</option>
                    </select>
                </td>
            </tr>
        </table>
        <br>
        <button type="button" name="submitButton" value="submitButton" id="submitButton">Submit</button>
    </div>
    <div id="responseDiv">
        <h1 id="responseHeader"></h1>
    </div>
    <script>
        $("img").hide();
        var responseArray = [{
                name: "Roger Rabbit",
                array: [2, 3, 4, 5, 2, 3, 2, 1, 3, 5]
            },
            {
                name: "Paul Allen",
                array: [1, 3, 4, 2, 5, 5, 3, 2, 3, 4]
            },
            {
                name: "Wiley Wiggins",
                array: [1, 3, 4, 2, 5, 5, 3, 2, 3, 4]
            }

        ]
        // This Array prototype extension returns the smallest value in an array
        // Taken from https://stackoverflow.com/a/8934895
        // NB: Even if the more than one array item shares the lowest amount,
        // only one will be returned
        // e.g. [2, 3, 1, 1, 5, 1], only array[2] will be returned.
        Array.min = function (array) {
            return Math.min.apply(Math, array);
        };
        $("button#submitButton").on("click", function (surveyEvaluation) {
            var userInputs = {
                name: "",
                photo: "",
                array: []
            };
            var sumArray = [];
            console.log("Button was clicked");
            userInputs.name = $("input#nameInput").val();
            userInputs.photo = $("input#photoLink").val();
            $("img").attr("src", $("input#photoLink").val());
            $("img").show();
            $("div#inputFields").hide();
            for (var i = 1; i <= $("div#inputFields select").length; i++) {
                // The values in a select element are strings, and must be turned into integers
                userInputs.array.push(parseInt($("select#question" + i + "").val()));
            }
            // responseArray.push(userInputs);
            console.log(responseArray);
            for (var j = 0; j < responseArray.length; j++) {
                var sum = 0;
                for (var k = 0; k < userInputs.array.length; k++) {
                    sum += (Math.abs(userInputs.array[k] - responseArray[j].array[k]));
                }
                sumArray.push(sum);
            }
            console.log(sumArray);
            console.log("The lowest number is: " + Array.min(sumArray));
            console.log("Closest match is " + responseArray[sumArray.indexOf(Array.min(sumArray))].name);
            $("h1#responseHeader").html("We found a match for you, " +
                $("input#nameInput").val() + ". You share a lot in common with " +
                responseArray[sumArray.indexOf(Array.min(sumArray))].name + "!");
            responseArray.push(userInputs);
            console.log(responseArray);
            $("input#nameInput").val("");
            $("select.inputSelect").val("1");
        });
    </script>
    <!-- <script src="../data/friends.js"></script>
    <script src="../server.js"></script>
    <script src="../routing/htmlRoutes.js"></script>
    <script src="../routing/apiRoutes.js"></script> -->
</body>

</html>